"use strict";(self.webpackChunkvibra_web_wiki=self.webpackChunkvibra_web_wiki||[]).push([[207],{99:e=>{e.exports=JSON.parse('{"permalink":"/blog/activities-vibra-post","editUrl":"https://github.com/desobsesor/vibra-web-wiki/tree/main/blog/2025-05-24-activities-vibra-post.mdx","source":"@site/blog/2025-05-24-activities-vibra-post.mdx","title":"Inside Vibra\'s MongoDB Architecture","description":"The backbone of any robust application is its data model. In this post, we\'ll explore the MongoDB database architecture that powers the Vibra platform, examining how we\'ve structured our data to support educational activities, user management, and organizational needs.","date":"2025-05-24T00:00:00.000Z","tags":[{"inline":false,"label":"MongoDB","permalink":"/blog/tags/mongodb","description":"Content related to MongoDB database technology"},{"inline":false,"label":"Database","permalink":"/blog/tags/database","description":"Topics covering database design, implementation, and management"},{"inline":false,"label":"Architecture","permalink":"/blog/tags/architecture","description":"Software architecture patterns, designs, and best practices"}],"readingTime":3.75,"hasTruncateMarker":true,"authors":[{"name":"Yovany Suarez Silva","title":"Software Engin FullStack Developer","url":"https://desobsesor.github.io/portfolio-web/","page":{"permalink":"/blog/authors/all-yovany-articles"},"socials":{"x":"https://x.com/desobsesor","linkedin":"https://www.linkedin.com/in/yovany-su%C3%A1rez-silva-78202029/","github":"https://github.com/desobsesor/","newsletter":"https://desobsesor.github.io/portfolio-web/"},"imageURL":"https://desobsesor.github.io/portfolio-web/assets/6803296_ia-min.jpeg","key":"desobsesor"}],"frontMatter":{"slug":"activities-vibra-post","title":"Inside Vibra\'s MongoDB Architecture","authors":["desobsesor"],"tags":["mongodb","database","architecture"]},"unlisted":false,"nextItem":{"title":"Welcome tu vibra app","permalink":"/blog/welcome"}}')},5054:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>t,toc:()=>d});var t=i(99),s=i(4848),a=i(8453);const o={slug:"activities-vibra-post",title:"Inside Vibra's MongoDB Architecture",authors:["desobsesor"],tags:["mongodb","database","architecture"]},r="Inside Vibra's MongoDB Architecture",l={authorsImageUrls:[void 0]},d=[{value:"Domain-Driven Database Design",id:"domain-driven-database-design",level:2},{value:"Key Collections and Relationships",id:"key-collections-and-relationships",level:2},{value:"Activities Domain",id:"activities-domain",level:3},{value:"User Management Domain",id:"user-management-domain",level:3},{value:"Smart Database Design Patterns",id:"smart-database-design-patterns",level:2},{value:"1. Embedded Documents for Related Data",id:"1-embedded-documents-for-related-data",level:3},{value:"2. References for Shared Data",id:"2-references-for-shared-data",level:3},{value:"3. Soft Deletion Pattern",id:"3-soft-deletion-pattern",level:3},{value:"4. Comprehensive Audit Trails",id:"4-comprehensive-audit-trails",level:3},{value:"Visualization of Key Relationships",id:"visualization-of-key-relationships",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The backbone of any robust application is its data model. In this post, we'll explore the MongoDB database architecture that powers the Vibra platform, examining how we've structured our data to support educational activities, user management, and organizational needs."}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"MongoDB's document-oriented approach gives us the flexibility to evolve our data model as Vibra's requirements grow, while maintaining performance at scale."})}),"\n","\n",(0,s.jsx)(n.h2,{id:"domain-driven-database-design",children:"Domain-Driven Database Design"}),"\n",(0,s.jsx)(n.p,{children:"Vibra's database architecture follows domain-driven design principles, organizing collections into logical domains that reflect the business capabilities of the application:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"User Management"}),": Handling authentication, authorization, and user profiles"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Activities and Learning"}),": Managing educational content and user interactions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Notifications"}),": Supporting real-time user communication"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Permissions and Access Control"}),": Implementing fine-grained security"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Organizations"}),": Managing institutional hierarchies"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"System Configuration"}),": Controlling application behavior"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Audit and Reporting"}),": Tracking system usage and generating insights"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"key-collections-and-relationships",children:"Key Collections and Relationships"}),"\n",(0,s.jsx)(n.p,{children:"Let's explore some of the most important collections in our database and how they relate to each other:"}),"\n",(0,s.jsx)(n.h3,{id:"activities-domain",children:"Activities Domain"}),"\n",(0,s.jsx)(n.p,{children:"The Activities collection is central to Vibra's educational functionality:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// Example Activity document\n{\n  "_id": ObjectId("60d21b4667d0d8992e610c85"),\n  "id": "act-emotional-awareness-1",\n  "emotions": "joy,surprise",\n  "title": "Emotional Awareness Exercise",\n  "resources": [\n    {\n      "type": "video",\n      "url": "https://resources.vibra.co/videos/emotional-awareness.mp4",\n      "duration": 180,\n      "metadata": {\n        "author": "Dr. Emma Rodriguez",\n        "language": "es"\n      }\n    }\n  ],\n  "questions": [\n    {\n      "id": "q1",\n      "questionText": "How did you feel after watching the video?",\n      "type": "multiple-choice",\n      "options": ["Happy", "Confused", "Inspired", "Neutral"],\n      "correctAnswer": null,\n      "points": 5\n    }\n  ],\n  "difficulty": 2,\n  "isActive": true,\n  "schedule": {\n    "date": ISODate("2025-06-15T00:00:00Z"),\n    "weekNumber": 24,\n    "year": 2025\n  },\n  "createdAt": ISODate("2025-05-10T14:30:00Z")\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Activities are linked to Emotions, which categorize the emotional learning objectives:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// Example Emotion document\n{\n  "_id": ObjectId("60d21b4667d0d8992e610c86"),\n  "id": "joy",\n  "name": "Joy",\n  "orientationNote": "Focus on positive experiences and gratitude",\n  "description": "A feeling of great pleasure and happiness",\n  "icono": "joy-icon.svg",\n  "percentNote": 85\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"When users complete activities, their responses are stored in the UserResponses collection:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// Example UserResponse document\n{\n  "_id": ObjectId("60d21b4667d0d8992e610c87"),\n  "user": "user123",\n  "activity": "act-emotional-awareness-1",\n  "responses": [\n    {\n      "questionId": "q1",\n      "answer": "Inspired",\n      "isCorrect": null,\n      "responseTime": 12\n    }\n  ],\n  "score": 5,\n  "startTime": ISODate("2025-06-16T10:15:00Z"),\n  "endTime": ISODate("2025-06-16T10:18:30Z"),\n  "timeSpent": 210,\n  "createdAt": ISODate("2025-06-16T10:18:30Z"),\n  "updatedAt": ISODate("2025-06-16T10:18:30Z")\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"user-management-domain",children:"User Management Domain"}),"\n",(0,s.jsx)(n.p,{children:"The Users collection stores comprehensive information about system users:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:'// Example User document\n{\n  "_id": ObjectId("60d21b4667d0d8992e610c88"),\n  "name": "Maria Garcia",\n  "documentType": ObjectId("60d21b4667d0d8992e610c89"),\n  "documentNumber": "1098765432",\n  "email": "maria.garcia@example.com",\n  "username": "maria.garcia",\n  "password": "$2a$10$hKDVYxLefVHV/vtuPhWD3OigtRyOykRLDdUAp80Z1crSoS1lFqaFS",\n  "role": ObjectId("60d21b4667d0d8992e610c8a"),\n  "company": ObjectId("60d21b4667d0d8992e610c8b"),\n  "isActive": true,\n  "createdAt": ISODate("2025-01-15T08:30:00Z")\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"smart-database-design-patterns",children:"Smart Database Design Patterns"}),"\n",(0,s.jsx)(n.p,{children:"Our MongoDB implementation leverages several design patterns that enhance maintainability and performance:"}),"\n",(0,s.jsx)(n.h3,{id:"1-embedded-documents-for-related-data",children:"1. Embedded Documents for Related Data"}),"\n",(0,s.jsx)(n.p,{children:"We use embedded documents for closely related data that is always accessed together. For example, Activity documents embed Resources and Questions, optimizing read performance by reducing the need for joins."}),"\n",(0,s.jsx)(n.h3,{id:"2-references-for-shared-data",children:"2. References for Shared Data"}),"\n",(0,s.jsx)(n.p,{children:"For data that is shared across multiple documents (like Users referenced by UserResponses), we use references to maintain data integrity and avoid duplication."}),"\n",(0,s.jsx)(n.h3,{id:"3-soft-deletion-pattern",children:"3. Soft Deletion Pattern"}),"\n",(0,s.jsxs)(n.p,{children:["Instead of permanently removing data, most collections implement soft deletion with ",(0,s.jsx)(n.code,{children:"deleted"})," and ",(0,s.jsx)(n.code,{children:"deletedAt"})," fields, preserving data for auditing while removing it from active use."]}),"\n",(0,s.jsx)(n.h3,{id:"4-comprehensive-audit-trails",children:"4. Comprehensive Audit Trails"}),"\n",(0,s.jsx)(n.p,{children:"Most collections include creation and modification timestamps and user references, enabling detailed tracking of data changes over time."}),"\n",(0,s.jsx)(n.h2,{id:"visualization-of-key-relationships",children:"Visualization of Key Relationships"}),"\n",(0,s.jsx)(n.p,{children:"The diagram below illustrates the core relationships in our database:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    Users --\x3e Roles\n    Users --\x3e Companies\n    Activities --\x3e Emotions\n    UserResponses --\x3e Users\n    UserResponses --\x3e Activities\n    Notifications --\x3e NotificationTypes\n    Permissions --\x3e PermissionCategories\n    UserPermissions --\x3e Users\n    UserPermissions --\x3e Permissions\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,s.jsx)(n.p,{children:"To ensure optimal performance, we've implemented several strategies:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Strategic Indexing"}),": We've created indexes on frequently queried fields to speed up searches"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Data Denormalization"}),": Where appropriate, we denormalize data to reduce the need for complex joins"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pagination"}),": For large collections, we implement pagination to limit result sizes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compound Indexes"}),": For queries that filter on multiple fields, we use compound indexes"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.p,{children:"Vibra's MongoDB architecture demonstrates how a well-designed database schema can support complex application requirements while maintaining flexibility and performance. By organizing collections into logical domains and implementing smart design patterns, we've created a data foundation that can evolve with the application's needs."}),"\n",(0,s.jsx)(n.p,{children:"In future posts, we'll explore how our front-end components interact with this database structure and how we've implemented real-time features using MongoDB change streams."}),"\n",(0,s.jsx)("div",{className:"alert alert--info",style:{marginTop:"2rem"},children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)("strong",{children:"Want to learn more?"})," Check out our ",(0,s.jsx)("a",{href:"../docs/aplicaciones/model-schema-db",children:"detailed database schema documentation"})," for a comprehensive reference."]})})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var t=i(6540);const s={},a=t.createContext(s);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);